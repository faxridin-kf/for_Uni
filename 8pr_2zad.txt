#include<iostream>
using namespace std;
struct node {
    int c;
    node* next, * prev;
};
 
unsigned ElementsCount(node* cnode);
int main() {
    cout<< "Подготовил Кучкаров Фахриддин группы 618-21"<<endl;
    cout<< "На тему: Написать функцию, которая по произвольному указателю на один из элементов двусвязного списка подсчитывает количество элементов в этом списке."<<endl;
    node *head = nullptr, *tail = nullptr, *n=nullptr;
    n = new node;
    n->c = rand() % 9 + 1;
    n->prev = nullptr;
    head = n;
    tail = n;
    for (int i = 1; i < 10; i++)
    {
        n = new node;
        n->c = rand() % 9 + 1;
        n->prev = tail;
        n->next = nullptr;
        tail->next = n;
        tail = n;
    }
    n = head;
    while(n)
    {
        cout << n->c << ' ';
        n = n->next;
    }
    // ElementsCount(n);   !!! n == nullptr, нужен валидный узел
    cout << endl << "подсчитанный " << ElementsCount(tail);
}
unsigned ElementsCount(node* cnode)
{
    unsigned count = 0;
    node* start = cnode;
    if (cnode) { // исправил (!cnode)
        ++count; // текущий элемент
           // первый цикл влево
        while (cnode->prev != nullptr) {
            ++count;
            cnode = cnode->prev;
        }
        cnode = start;
        while (cnode->next != nullptr) {
            ++count;
            cnode = cnode->next;
        }
    }
    return count;
}
